<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Robux Gamepass & Gift in Game</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div id="validationContainer"></div>

  <main class="wrap">
    <header class="top">
      <div class="title">Robux Gamepass & Gift in Game</div>

      <div id="adminPanel" class="adminPanel" style="display:none;">
        <div class="adminRow">
          <div class="adminLeft">
            <span class="adminLabel">Admin:</span>
            <span id="adminEmail" class="adminEmail"></span>
            <span id="adminBadge" class="adminBadge badgeOpen">OPEN</span>
          </div>
          <div class="adminRight">
            <button id="btnAdminLogin" type="button" class="btn">Login</button>
            <button id="btnAdminLogout" type="button" class="btn">Logout</button>
          </div>
        </div>

        <div class="adminRow adminRow2">
          <button id="btnSetOpen" type="button" class="btn">Set OPEN</button>
          <button id="btnSetClose" type="button" class="btn">Set CLOSED</button>

          <div class="adminRateBox">
            <input id="adminRateInput" type="number" class="input" min="1" />
            <button id="btnSaveRate" type="button" class="btn">Save Rate</button>
          </div>
        </div>
      </div>
    </header>

    <section class="card">
      <form id="orderForm" autocomplete="off">
        <div class="field">
          <label for="displayUser">Display + Username</label>
          <input id="displayUser" class="input" type="text" required placeholder="contoh: Dini (@dinijanuari23)" />
        </div>

        <div class="field">
          <label>Jenis Pembelian</label>

          <!-- Hidden select (kept for existing logic), tabs control its value -->
          <select id="gpType" required class="hidden">
            <option value="gig">Gift In Game (GIG)</option>
            <option value="paytax">Game Pass Paytax</option>
            <option value="notax">Game Pass Notax</option>
          </select>

          <div class="tabBar" role="tablist" aria-label="Jenis Pembelian">
            <button type="button" class="typeTab" data-value="gig" role="tab">Gift In Game (GIG)</button>
            <button type="button" class="typeTab" data-value="paytax" role="tab">Game Pass Paytax</button>
            <button type="button" class="typeTab" data-value="notax" role="tab">Game Pass Notax</button>
          </div>
        </div>

        <!-- PAYTAX -->
        <div id="paytaxFields" class="section hidden">
          <div class="field">
            <label for="targetNet">Target bersih (R$)</label>
            <input id="targetNet" class="input" type="number" min="1" placeholder="contoh: 100" />
          </div>

          <div class="field">
            <label for="robuxNeed">Robux dibutuhkan (R$)</label>
            <input id="robuxNeed" class="input" type="text" readonly />
          </div>

          <div class="field">
            <label for="gpLinkPaytax">ID/Link Game Pass</label>
            <textarea
              id="gpLinkPaytax"
              class="input"
              rows="1"
              required
              placeholder="Contoh: 1234567890 atau https://www.roblox.com/game-pass/1234567890"
            ></textarea>
          </div>
        </div>

        <!-- NOTAX -->
        <div id="notaxFields" class="section hidden">
          <div class="field">
            <label for="robuxInput">Robux (R$)</label>
            <input id="robuxInput" class="input" type="number" min="1" placeholder="contoh: 100" />
          </div>

          <div class="field">
            <label for="netReceive">Perkiraan bersih diterima</label>
            <input id="netReceive" class="input" type="text" readonly />
          </div>

          <div class="field">
            <label for="gpLinkNotax">ID/Link Game Pass</label>
            <textarea
              id="gpLinkNotax"
              class="input"
              rows="1"
              required
              placeholder="Contoh: 1234567890 atau https://www.roblox.com/game-pass/1234567890"
            ></textarea>
          </div>
        </div>

        <!-- GIG -->
        <div id="gigFields" class="section hidden">
          <div class="field">
            <label for="gigMap">Maps</label>
            <input id="gigMap" class="input" type="text" placeholder="contoh: Blox Fruits" />
          </div>

          <div class="field">
            <label for="gigItem">Item gift</label>
            <input id="gigItem" class="input" type="text" placeholder="contoh: Perm Fruit" />
          </div>

          <div class="field">
            <label for="gigRobuxPrice">Harga item (R$)</label>
            <input id="gigRobuxPrice" class="input" type="number" min="1" placeholder="contoh: 250" />
          </div>
        </div>

        <div class="field">
          <label for="rate">Rate</label>
          <input id="rate" class="input" type="text" readonly />
        </div>

        <!-- Reminder moved to above total price (shown only for paytax/notax) -->
        <div id="gpReminderWrap" class="reminderWrap hidden">
          <div class="reminderText">
            <b>Paytax / Notax</b> butuh <b>ID Game Pass</b>.
            <a href="#" class="gpTutorialLink"><b>Lihat cara salin ID Game Pass di sini</b></a>.
            Robux akan masuk ke <b>Pending</b> dulu. Cek:
            <a href="https://www.roblox.com/transactions" target="_blank" rel="noopener">www.roblox.com/transactions</a>.
            Estimasi masuk saldo <b>± 5–8 hari</b>.
            Maksimal <b>1 ID Game Pass = 1000 Robux</b> (kalau lebih, buat lebih dari 1 Game Pass).
          </div>

          <div id="gpAgreeRow" class="agreeRow hidden">
            <div class="agreeLeft">
              <input id="gpAgree" type="checkbox" />
            </div>
            <div class="agreeRight">
              Saya sudah membaca dan memahami informasi di atas (ID Game Pass, Pending, estimasi 5–8 hari, dan batas 1000 Robux per ID).
            </div>
          </div>
        </div>

        <div class="field">
          <label for="harga">Harga</label>
          <input id="harga" class="input" type="text" readonly />
        </div>

        <button id="btnWa" type="button" class="btnPrimary">Kirim Pesanan via Telegram</button>
      </form>
    </section>
  </main>

  <!-- Tutorial Modal (ONLY close via X) -->
  <div id="tutorialModal" class="tutorialModal hidden" aria-hidden="true">
    <div class="tutorialInner" role="dialog" aria-modal="true" aria-label="Tutorial salin ID Game Pass">
      <button id="tutorialCloseBtn" type="button" class="tutorialClose" aria-label="Tutup">✕</button>
      <img id="tutorialImg" class="tutorialImg" alt="Tutorial salin ID Game Pass" />
    </div>
  </div>

  <!-- Payment Modal -->
  <div id="paymentModalBackdrop" class="payBackdrop" style="display:none;" aria-hidden="true">
    <div class="payModal" role="dialog" aria-modal="true" aria-label="Pembayaran">
      <button id="closeModalBtn" class="payClose" type="button" aria-label="Tutup">✕</button>

      <div class="payTitle">Pembayaran</div>

      <img id="modalQr" class="payQr" alt="QRIS" />

      <div class="payMethods">
        <button type="button" class="method-btn active" data-method="qris">QRIS</button>
        <button type="button" class="method-btn" data-method="gopay">GoPay</button>
        <button type="button" class="method-btn" data-method="seabank">SeaBank</button>
        <button type="button" class="method-btn" data-method="dana">DANA</button>
      </div>

      <div id="walletLabel" class="payLabel"></div>

      <div id="walletNumberWrapper" class="payNumberWrap" style="display:none;">
        <div id="walletNumberTitle" class="payNumberTitle"></div>
        <div id="walletNumber" class="payNumber"></div>
        <button id="copyNumberBtn" type="button" class="payBtn">Salin Nomor</button>
      </div>

      <div class="payAmountRow">
        <div>Total</div>
        <div id="modalAmount" class="payAmount"></div>
      </div>

      <div class="payActions">
        <button id="copyAmountBtn" type="button" class="payBtn">Salin Jumlah</button>
        <button id="openBotBtn" type="button" class="payBtnPrimary">Buka Bot Telegram</button>
      </div>

      <div id="walletNote" class="payNote"></div>
      <div id="copySuccess" class="payToast" style="display:none;"></div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
